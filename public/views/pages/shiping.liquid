---
slug: "shiping"
---

Calculate shiping price

{% parse_json "shipment_data" %}
{
  "address_from":{
    "name":"Mr. Hippo",
    "street1":"215 Clayton St.",
    "city":"San Francisco",
    "state":"CA",
    "zip":"94117",
    "country":"US"
  },
  "address_to":{
      "name":"Mrs. Hippo",
      "street1":"965 Mission St.",
      "city":"San Francisco",
      "state":"CA",
      "zip":"94105",
      "country":"US"
  },
  "parcels":[{
      "length":"5",
      "width":"5",
      "height":"5",
      "distance_unit":"in",
      "weight":"3.3",
      "mass_unit":"lb"
   }],
   "async": false
}
{% endparse_json %}


{% parse_json "data" %}
  {
    "properties": [
       { "name": "request_type", "value": "create_shipment" },
       { "name": "data", "value":  "{{ shipment_data | json | escape_javascript }}" } 
     ]
  }
{% endparse_json %}

{% graphql g = "modules/payments/create_customization", form: "modules/shippo/shippo_request_form", data: data %}
{% parse_json "shipment" %}{{ g.customization_create.properties.response }}{% endparse_json %}

{% comment %}

{% graphql s = "modules/shippo/get_shipments" %}
{% assign shipment = s.customizations.results.first %}
{% endcomment %}
<p>{{ shipment.object_id }}</p>
<p>
  Address To: {{ shipment.address_to }}
</p>
<p>
  Address From: {{ shipment.address_from }}
</p>
<ul>
  {% for rate in shipment.rates %}
    <li>
      {{ rate.amount | pricify: rate.currency }}, {{ rate.provider }}
      <span>{{ rate.duration_terms }}</span>
      {% include "modules/shippo/create_transaction", rate_id: rate.id %}
    </li>
  {% endfor %}
</ul>
